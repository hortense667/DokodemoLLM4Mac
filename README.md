# DokodemoLLM

macOS向けどこでもLLM実行ユーティリティです。  
任意のアプリケーションでテキストを選択し、簡単なショートカットキーを押すだけで、GeminiやOpenAI(GPT)といった大規模言語モデル（LLM）を呼び出して、テキストの処理（翻訳、要約、校正など）を行わせることができます。

## 主な機能

-   **どこでも呼び出し**: どのアプリケーションを使っている最中でも、ショートカット一つでLLMを呼び出せます。
-   **マルチLLM対応**: GoogleのGeminiとOpenAIのGPTを、ショートカットキーで使い分けられます。
-   **Web検索連携**: プロンプトに `/w` と追記することで、Web検索の結果を元にLLMが回答を生成します。
-   **クリップボード連携**: 処理したいテキストを選択し、結果を元のアプリケーションにスムーズに貼り付けられます。

## インストール方法

1.  **dmgファイルの展開**:
    -   配布された `.dmg` ファイル（例: `DokodemoLLM-1.0.0-arm64.dmg`）をダブルクリックして開きます。

2.  **アプリケーションの移動**:
    -   開いたウィンドウに表示される `DokodemoLLM` のアイコンを、`Applications` フォルダのアイコンの上にドラッグ＆ドロップします。
    -   これでインストールは完了です。

3.  **初回起動時の設定**:
    -   最初に `DokodemoLLM` を起動しようとすると、「開発元が未確認のため開けません」という警告が表示されることがあります。
    -   その場合は、以下の手順でアプリケーションの実行を許可してください。
        1.  `システム設定` を開きます。
        2.  左側のメニューから `プライバシーとセキュリティ` を選択します。
        3.  下にスクロールし、「"DokodemoLLM"は開発元を確認できないため、使用がブロックされました。」というメッセージの横にある `このまま開く` ボタンをクリックします。
        4.  パスワードを求められたら入力し、アプリケーションの実行を許可します。

## 初期設定：APIキーの設定

本アプリケーションを使用するには、専用の設定ファイルにAPIキーを保存する必要があります。この設定は、最初の一度だけ必要です。

1.  **ターミナルを開く**:
    -   `Launchpad` や `Command + Space` のSpotlight検索から「ターミナル」と入力して `ターミナル.app` を開きます。

2.  **設定フォルダとファイルを作成する**:
    -   ターミナルに以下のコマンドを一行ずつコピー＆ペーストして、`Enter`キーを押してください。
    
    ```bash
    mkdir -p ~/Library/Application\ Support/DokodemoLLM
    touch ~/Library/Application\ Support/DokodemoLLM/api_keys.txt
    open -t ~/Library/Application\ Support/DokodemoLLM/api_keys.txt
    ```
    -   これにより、必要なフォルダが作成され、`TextEdit` アプリで設定ファイルが開きます。

3.  **APIキーを書き込む**:
    -   開いたファイルに、ご自身のAPIキーを以下のような形式で書き込みます。
    
    ```
    GEMINI_API_KEY=ここにあなたのGemini APIキーを貼り付け
    OPENAI_API_KEY=ここにあなたのOpenAI APIキーを貼り付け
    ```
    -   `=`の前後にスペースを入れないでください。

4.  **ファイルを保存**:
    -   `Command (⌘) + S` を押してファイルを保存し、`TextEdit` を閉じます。

これで設定は完了です。このファイルは一度作成すれば、アプリケーションをアップデートしてもそのままお使いいただけます。

---
### (上級者向け) 環境変数の設定
ターミナルから直接開発・実行する場合に限り、シェルの設定ファイル (`~/.zshrc` など) に環境変数を設定する方法も利用可能です。アプリケーションは、まず設定ファイルを探し、見つからなければ環境変数を探しに行きます。

## 使い方

1.  **DokodemoLLMを起動**:
    -   `Applications` フォルダから `DokodemoLLM` をダブルクリックして起動します。
    -   **注意**: このアプリはメニューバーやDockにアイコンが表示されない、バックグラウンドで動作する常駐アプリです。

2.  **テキストを選択**:
    -   テキストエディタ、ブラウザ、メモ帳など、任意のアプリケーションで処理したいテキストを選択（ハイライト）します。

3.  **ショートカットキーを押す**:
    -   **Geminiを使いたい場合**: `Command (⌘) + Option (⌥) + Shift (⇧) + G`
    -   **OpenAIを使いたい場合**: `Command (⌘) + Option (⌥) + Shift (⇧) + O`

4.  **指示を入力**:
    -   画面中央に小さな入力ウィンドウが表示されます。
    -   選択したテキストに対する指示（例: `日本語に翻訳して`、`この記事を3行で要約して` など）を入力し、`Enter`キーを押します。

5.  **結果の確認と貼り付け**:
    -   LLMからの処理結果が確認ウィンドウに表示されます。
    -   内容を確認して `OK` ボタンを押すと、元のアプリケーションのカーソル位置に結果が貼り付けられます。（内部的には結果がクリップボードにコピーされ、元のアプリにペースト操作が送られます）
    -   `CANCEL` を押すと、何もせずにウィンドウが閉じます。

### 便利な使い方：Web検索

-   選択したテキスト（検索クエリ）についてWebで検索し、その結果を元に回答を生成させたい場合は、プロンプトの最後に `/w` を付けてください。
-   **例**: `この人物について教えて /w`

## アンインストール方法

-   `Applications` フォルダにある `DokodemoLLM` をゴミ箱にドラッグ＆ドロップしてください。

## ライセンス

このソフトウェアは [MITライセンス](LICENSE) の下で公開されています。

---

## 開発者向け情報：ソースからのビルド

このアプリケーションを自分でビルド・改変したい開発者は、以下の手順に従ってください。

### 1. 必要なツール

-   Node.js (v18以降を推奨)
-   Python (v3.9以降を推奨)
-   Git

### 2. セットアップ

```bash
# リポジトリをクローン
git clone https://github.com/yourusername/DokodemoLLM.git
cd DokodemoLLM

# Node.jsの依存関係をインストール
npm install
```

### 3. Python実行ファイルのビルド

アプリケーションは、内部で `PyInstaller` によって実行ファイル化されたPythonスクリプトを呼び出します。以下の手順で、この実行ファイルを作成します。

```bash
# Python仮想環境の作成と有効化
python3 -m venv venv
source venv/bin/activate

# 必要なPythonライブラリをインストール
pip install -r requirements.txt
pip install pyinstaller

# 実行ファイルをビルド
pyinstaller DokodemoLLMG.spec
pyinstaller DokodemoLLMO.spec

# ビルドした実行ファイルをプロジェクトルートにコピー
cp dist/DokodemoLLMG .
cp dist/DokodemoLLMO .

# 仮想環境を無効化
deactivate
```

### 4. 開発モードでの実行

```bash
npm start
```

### 5. 配布パッケージ (.dmg) の作成

```bash
npm run dist
``` 